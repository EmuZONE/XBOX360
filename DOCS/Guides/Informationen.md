Was ist der JTAG Hack?


Im Prinzip wird die Methode, die Xbox360 homebrewtauglich zu machen, fälscherlicherweise als JTAG Hack bezeichnet. Ein JTAG Port wird bei diversen elektronischen Geräten normalerweise als eine Art Debugport genutzt, um es z.B. Servicetechnikern zu erleichtern, auf das Gerät zuzugreifen und ggf. Einstellungen zu ändern oder auszulesen. Bei der Xbox360 gibt es einen solchen (physikalischen) Anschluss zwar nicht serienmäßig auf dem Mainboard, allerdings existieren dafür die Ports (also die Lötverbindungen) um eine solche Schnittstelle mit Zusatzhardware zu realisieren. Bei der Xbox360 benutzt man den JTAG Port um auf den NAND (also den internen Flash Speicher des Mainboards) zuzugreifen. Damit besteht die Möglichkeit, den NAND zu lesen, oder auch zu beschreiben.

Der JTAG Hack selbst macht eigentlich garnicht viel, außer wie gesagt den NAND zu beschreiben oder zu lesen. Allerdings hat man durch eine Lücke im 1. Bootloader (first stage bootloader) der Xbox360 die Möglichkeit ein kleines Exploit auszuführen. Dieses ist euch vlt. als XeLL bekannt. XeLL steht für "Xenon Linux Loader" und sollte es anfangs ermöglichen ein Linux-basiertes Betriebssystem auf der Konsole zu starten. Allerdings wurde XeLL im Laufe der Zeit stets weiterentwickelt, so dass nun auch andere Sachen damit möglich sind.

Simpel gesagt werden zum Ausnutzen der genannten Schwachstelle im Bootloader ungenutzte GPIO Ports (General Purpose Input/ Output) dazu verwendet, die dazugehörige Software (also das XeLL Exploit) zu starten. Diese GPIO Ports waren damals auf dem Mainboard vermutlich für andere Sachen vorgesehen, wurden aber nie realisiert und sind nun quasi "über". Diese Ports sind auf allen Mainboards ab der 2. Generation identisch, nur die Xenon-Revision (1) besitzt noch andere/weitere ungenutzte GPIO Ports. In beiden Fällen werden einige Punkte auf dem Mainboard miteinander verbunden, die später dafür sorgen, dass die Xbox XeLL starten kann.
Tiefer möchte ich hier nicht ins Detail gehen. Wer weitere Infos dazu haben möchte, findet diese vermutlich auf Free60.org.


Was ist der Reset Glitch Hack?


Der so genannte Reset Glitch Hack wurde am 28.08.2011 veröffentlicht und u.a. von GliGli und Tiros entwickelt. In der Durchführung unterscheidet er sich grundlegend vom JTAG Hack, die Möglichkeiten sind letztendlich aber die Gleichen. Der Reset Glitch Hack ist, anders als der JTAG Hack, auf der Hardwareebene angesiedelt. In diesem speziellen Fall wird die CPU (also die Hauptrecheneinheit) angegriffen. Das hat einen entscheidenden Vorteil gegenüber dem JTAG Hack, der reinweg auf Softwareebene stattfand: Er lässt sich durch Microsoft nicht nachträglich patchen. Somit spielt die Dashboardversion oder die Revision der Xbox360 eigentlich keine Rolle mehr. Die einzige Ausnahme ist, dass der Hack nur mit HDMI Konsolen funktioniert und somit Xenon Konsolen außenvor bleiben. Alle bisher verkaufen Xbox360 Modelle (ca. 40 Millionen) sind davon betroffen.

Um das Sicherheitssystem der Xbox360 zu überwinden, wird der Prozessortakt der CPU beim Bootvorgang verringert. Schnell wird klar, warum Xenon Konsolen hier nicht möglich werden. Am HANA Chip (der kümmert sich um das HDMI Output) wird ein von außen zugänglicher Bus (I2C) genutzt um die Teilregister im Taktgenerator neu zu beschreiben. Während des Runtertaktprozesses wird mit einem CPLD Modul zu einem bestimmten Zeitpunkt ein 20 Nanosekunden dauernder Impuls auf die Resetleitung der CPU gesendet. Dadurch wird allerdings auf unterster Ebene kein Neustart der CPU ausgeführt, sondern lediglich der Resetbefehl gesendet, wodurch sich wiederrum mit etwas Glück ein manipulierter Vergleich von Speicherbereichen (memcmp) erzwingen lässt. Auf dieser Ebene sind die Sicherheitssysteme nicht wirklich aktiv und es kann wie gesagt mit etwas Glück ein modifizierter Bootloader gestartet werden (Xell). 


Was genau ist XeLL?


XeLL steht für Xenon Linux Loader und wurde bereits 2006 entwickelt. Damals war es noch möglich eine Schwachstelle in den Kernelversionen 4532/4548 auszunutzen. Dies geschah anfangs mit Hilfe des Spiels King Kong. Kurz gesagt handelte es sich um einen Shader Bug, den man mit Hilfe des King Kong Spiels ausnutzen konnte. Um den Hack auszuführen, musste man eine Kopie des King Kong Spiels anfertigen, dort XeLL injezieren und per geflashtem Laufwerk starten. Sobald das Menü von King Kong sichtbar war, lies sich die DVD Lade öffnen, ohne dass das Spiel aus ging. Nun musste man noch ein vorher prepariertes Linux Live Image in die Konsole legen und konnte somit Linux starten. (2006)

XeLL arbeitet heute im Prinzip immer noch nach dem gleichen Muster, muss nur nicht mehr über King Kong gestartet werden und ist selbst lauffähig. Die Lücke ist im Endeffekt immer noch die Gleiche wie 2006. Durch die Möglichkeit den NAND zu beschreiben kann XeLL nun allerdings direkt auf dem NAND abgespeichert werden. Dadurch lässt sich die Konsole direkt beim Einschalten in eine Art "Debugzustand" versetzen und ist so auch bereit Linux zu starten. Die Lücke die nun dafür aktiv ausgenutzt wird, befindet sich im "first stage bootloader". Mit einem Update am 11. August 2009 hat Microsoft in einem neuen Systemupdate einen aktualisierten Bootloader veröffentlicht, der die Lücke im System schließt und somit ein Ausführen von eigenen Inhalten unmöglich macht (JTAG). Der Reset Glitch Hack, der im August 2011 veröffentlicht wurde, wird dadurch nicht beeinträchtigt!
